<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    
    <title>most efficient AABB vs Ray collision algorithms - Game Development</title>
    <link rel="shortcut icon" href="http://cdn.sstatic.net/gamedev/img/favicon.ico">
    <link rel="apple-touch-icon" href="http://cdn.sstatic.net/gamedev/img/apple-touch-icon.png">
    <link rel="search" type="application/opensearchdescription+xml" title="Game Development - Stack Exchange" href="http://gamedev.stackexchange.com/opensearch.xml">

    
    <script src="most-efficient-aabb-vs-ray-collision-algorithms_fichiers/ga.js" async="" type="text/javascript"></script><script src="most-efficient-aabb-vs-ray-collision-algorithms_fichiers/quant.js" async="" type="text/javascript"></script><script type="text/javascript" src="most-efficient-aabb-vs-ray-collision-algorithms_fichiers/jquery.js"></script>
    <script type="text/javascript" src="most-efficient-aabb-vs-ray-collision-algorithms_fichiers/stub.js"></script>
    <link rel="stylesheet" type="text/css" href="most-efficient-aabb-vs-ray-collision-algorithms_fichiers/all.css">
    
    <link rel="canonical" href="http://gamedev.stackexchange.com/questions/18436/most-efficient-aabb-vs-ray-collision-algorithms">
    <link rel="alternate" type="application/atom+xml" title="Feed for question 'most efficient AABB vs Ray collision algorithms'" href="http://gamedev.stackexchange.com/feeds/question/18436">
    <script type="text/javascript">
        
        StackExchange.ready(function () {
            
            StackExchange.question.init({showAnswerHelp:true,totalCommentCount:11,shownCommentCount:5,highlightColor:'#F4A83D',backgroundColor:'#FFF',questionId:18436});

            styleCode();

                StackExchange.realtime.subscribeToQuestion('53', '18436');
            
                
        });
    </script>


        <script type="text/javascript">
             StackExchange.ready(function () {
                 StackExchange.realtime.init('ws://sockets-se.or.stackexchange.com:80,sockets-se.or.stackexchange.com:443');
                StackExchange.realtime.subscribeToInboxNotifications();
                                 StackExchange.realtime.subscribeToReputationNotifications('53');            
                         });
        </script>
    <script type="text/javascript">
        StackExchange.init({"stackAuthUrl":"https://stackauth.com","serverTime":1356952524,"styleCode":true,"enableUserHovercards":true,"site":{"name":"Game Development","description":"Q&A for professional and independent game developers","isNoticesTabEnabled":true,"recaptchaPublicKey":"6LdsB7sSAAAAAAzjgEF_Hd8vXv-C42sa_KyofaGR","enableSocialMediaInSharePopup":true},"user":{"fkey":"4ede4d721424a7bee26362a9fcd5ed08","isAnonymous":true}});
        StackExchange.using.setCacheBreakers({"js/prettify-full.js":"c862bf93b3ec","js/moderator.js":"37bba549a03e","js/full-anon.js":"27033739c1ff","js/full.js":"a75bd3a05af1","js/wmd.js":"0360a509b7c2","js/third-party/jquery.autocomplete.min.js":"e5f01e97f7c3","js/mobile.js":"6eb68240242f","js/help.js":"fc9fb0517db2","js/tageditor.js":"450c9e8426fc","js/tageditornew.js":"9ac6c13a3a7f","js/inline-tag-editing.js":"30f72b99548b","js/revisions.js":"8c6bcd93b7fe","js/review.js":"3a8e6a0a0dc8"});
        
    </script>


    <script type="text/javascript">
        StackExchange.using(
            "gps",
            function () {
                StackExchange.gps.init(false);
            }
        );
    </script>
<script src="most-efficient-aabb-vs-ray-collision-algorithms_fichiers/full-anon.js" type="text/javascript" async=""></script><script src="most-efficient-aabb-vs-ray-collision-algorithms_fichiers/prettify-full.js" type="text/javascript" async=""></script></head>
<body class="question-page">
    <noscript><div id="noscript-padding"></div></noscript>
    <div id="notify-container"></div>
    <div id="overlay-header"></div>
    <div id="custom-header"></div>

    <div class="container">
        <div id="header">
            <div id="portalLink">
                <a class="genu" onclick="StackExchange.ready(function(){genuwine.click();});return false;">Stack Exchange</a>
            </div>
            <div id="topbar">
                <div id="hlinks">
                    









<span id="hlinks-user">

</span>
<span id="hlinks-nav">
                   <a href="http://gamedev.stackexchange.com/users/login?returnurl=%2fquestions%2f18436%2fmost-efficient-aabb-vs-ray-collision-algorithms">log in</a>

 <span class="lsep">|</span>

</span>
<span id="hlinks-custom">
        <a href="http://chat.stackexchange.com/">chat</a>

 <span class="lsep">|</span>
                <a href="http://meta.gamedev.stackexchange.com/">meta</a>

 <span class="lsep">|</span>
        <a href="http://gamedev.stackexchange.com/about">about</a>

 <span class="lsep">|</span>
    <a href="http://gamedev.stackexchange.com/faq">faq</a>

</span>
                </div>
                <div id="hsearch">
                    <form id="search" action="/search" method="get" autocomplete="off">
                    <div>
                        <input autocomplete="off" name="q" class="textbox" placeholder="search" tabindex="1" maxlength="140" size="28" type="text">
                    </div>
                    </form>
                </div>
            </div>
            <br class="cbt">
            <div id="hlogo">
                <a href="http://gamedev.stackexchange.com/">Game Development</a>
            </div>
            <div id="hmenus">
                <div class="nav mainnavs">
                    <ul>
                        <li class="youarehere"><a id="nav-questions" href="http://gamedev.stackexchange.com/questions">Questions</a></li>
                        <li><a id="nav-tags" href="http://gamedev.stackexchange.com/tags">Tags</a></li>
                        <li><a id="nav-users" href="http://gamedev.stackexchange.com/users">Users</a></li>
                        <li><a id="nav-badges" href="http://gamedev.stackexchange.com/badges">Badges</a></li>
                        <li><a id="nav-unanswered" href="http://gamedev.stackexchange.com/unanswered">Unanswered</a></li>
                    </ul>
                </div>
                <div class="nav askquestion">
                    <ul>
                        <li>
                            <a id="nav-askquestion" href="http://gamedev.stackexchange.com/questions/ask">Ask Question</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div id="custom-content"><script>
StackExchange.ready(function () {
    $.ajax({
        url: "http://cdn.prom.sstatic.net/WinterBash/js/core.js?v=3",
        dataType: "script",
        cache: true
    }).done(function () {
        WinterBash.core.init('winterba.sh', 'http://cdn.prom.sstatic.net/WinterBash/');
    });
});
</script></div>



        <div id="content">
            

<div itemscope="" itemtype="http://schema.org/Article">
<link itemprop="image" href="http://cdn.sstatic.net/gamedev/img/apple-touch-icon.png">
<div id="question-header">
    <h1 itemprop="name"><a href="http://gamedev.stackexchange.com/questions/18436/most-efficient-aabb-vs-ray-collision-algorithms" class="question-hyperlink">most efficient AABB vs Ray collision algorithms</a></h1>
</div>
<div id="mainbar">



<div class="question" id="question" data-questionid="18436">
    
    <table>
    <tbody><tr>
    <td class="votecell">
        

<div class="vote">
    <input value="18436" type="hidden">
    <a class="vote-up-off" title="This question shows research effort; it is useful and clear (click again to undo)">up vote</a>
    <span class="vote-count-post ">17</span>
    <a class="vote-down-off" title="This question does not show any research effort; it is unclear or not useful (click again to undo)">down vote</a>
    
    <a class="star-off" href="#" title="This is a favorite question (click again to undo)">favorite</a>
    <div class="favoritecount"><b>12</b></div>   

 
</div>

    </td>
    
<td class="postcell">
<div>          
    <div class="post-text" itemprop="description">
        <p>Is there a known 'most efficient' algorithm for AABB vs Ray collision detection?</p>

<p>I recently stumbled accross Arvo's AABB vs Sphere collision 
algorithm, and I am wondering if there is a similarly noteworthy 
algorithm for this.</p>

<p>One must have condition for this algorithm is that I need to have the
 option of querying the result for the distance from the ray's origin to
 the point of collision. having said this, if there is another, faster 
algorithm which does not return distance, then in addition to posting 
one that does, also posting that algorithm would be very helpful indeed.</p>

<p>Please also state what the function's return argument is, and how you
 use it to return distance or a 'no-collision' case. For example, does 
it have an out parameter for the distance as well as a bool return 
value? or does it simply return a float with the distance, vs a value of
 -1 for no collision?</p>

<p>(For those that don't know: AABB = Axis Aligned Bounding Box)</p>

    </div>            
    <div class="post-taglist">
        <a href="http://gamedev.stackexchange.com/questions/tagged/collision-detection" class="post-tag" title="show questions tagged 'collision-detection'" rel="tag">collision-detection</a> 
    </div>
    <table class="fw">
    <tbody><tr>
    <td class="vt">









<div class="post-menu"><a href="http://gamedev.stackexchange.com/q/18436" title="short permalink to this question" class="short-link" id="link-post-18436">share</a><span class="lsep">|</span><a href="http://gamedev.stackexchange.com/posts/18436/edit" class="suggest-edit-post" title="">improve this question</a></div>
    </td>
    <td class="post-signature" align="right">


    <div class="user-info ">
        <div class="user-action-time">
                            edited
                             <a href="http://gamedev.stackexchange.com/posts/18436/revisions" title="show all edits to this post"><span title="2011-12-09 14:39:46Z" class="relativetime">Dec 9 '11 at 14:39</span></a>

        </div>
        <div class="user-gravatar32">
            
        </div>
        <div class="user-details">
            <br>
            
        </div>
    </div>
    </td>
    <td class="post-signature owner">
    

    <div class="user-info user-hover">
        <div class="user-action-time">
                                    asked
 <span title="2011-10-12 11:02:27Z" class="relativetime">Oct 12 '11 at 11:02</span>
        </div>
        <div class="user-gravatar32">
            <a href="http://gamedev.stackexchange.com/users/10079/asher-einhorn"><div class=""><img src="most-efficient-aabb-vs-ray-collision-algorithms_fichiers/c0d6df4a44b07d4e992dbe0cecd5feed.png" alt="" height="32" width="32"></div></a>
        </div>
        <div class="user-details">
            <a href="http://gamedev.stackexchange.com/users/10079/asher-einhorn">Asher Einhorn</a><br>
            <span class="reputation-score" title="reputation score" dir="ltr">1,090</span><span title="2 silver badges"><span class="badge2"></span><span class="badgecount">2</span></span><span title="21 bronze badges"><span class="badge3"></span><span class="badgecount">21</span></span>
        </div>
    </div>

        <br class="cbt">
        <div class="accept-rate accept-answer-link" title="this user has accepted an answer for 47 of 49 eligible questions">96% accept rate</div>
    </td>
    </tr>
    </tbody></table>
</div>
</td>    </tr>


<tr>
<td class="votecell"></td>
<td>
    <div id="comments-18436" class="comments">
        <table>
        <tbody>
                    
    <tr id="comment-28681" class="comment">
        <td></td>
        <td class="comment-text"><div><span class="comment-copy">I might
 be wrong but I think you will still get false positives with this 
algorithm. You are right that if all corners are on same side when 
checking the 3 axis, there is no collision. But it seems like you can 
still have the condition where all 3 axis have points on both sides and 
still have no collision. I generally check to see if entry/exit 
distances overlap on all three slabs to know for sure. It's from the 
Geometric tools site.</span> –&nbsp;<a href="http://gamedev.stackexchange.com/users/1923/steve-h" title="2914 reputation" class="comment-user">Steve H</a> <span class="comment-date" dir="ltr"><a class="comment-link" onclick="StackExchange.question.highlightComment(28681, 0)" href="#comment28681_18436"><span title="2011-10-12 15:29:52Z" class="relativetime-clean">Oct 12 '11 at 15:29</span></a></span></div></td>
    </tr>
            
    <tr id="comment-32885" class="comment">
        <td></td>
        <td class="comment-text"><div><span class="comment-copy">Why the
 must have condition for distance query? If there is an even faster 
algorithm for the case when you do not need the distance, don't you want
 to know about it, too?</span> –&nbsp;<a href="http://gamedev.stackexchange.com/users/5864/sam-hocevar" title="8896 reputation" class="comment-user">Sam Hocevar</a> <span class="comment-date" dir="ltr"><a class="comment-link" onclick="StackExchange.question.highlightComment(32885, 0)" href="#comment32885_18436"><span title="2011-12-09 12:17:55Z" class="relativetime-clean">Dec 9 '11 at 12:17</span></a></span></div></td>
    </tr>
            
    <tr id="comment-32886" class="comment">
        <td></td>
        <td class="comment-text"><div><span class="comment-copy">well, no, not really. I need to know at what distance the collision happens.</span> –&nbsp;<a href="http://gamedev.stackexchange.com/users/10079/asher-einhorn" title="1090 reputation" class="comment-user owner">Asher Einhorn</a> <span class="comment-date" dir="ltr"><a class="comment-link" onclick="StackExchange.question.highlightComment(32886, 0)" href="#comment32886_18436"><span title="2011-12-09 12:36:52Z" class="relativetime-clean">Dec 9 '11 at 12:36</span></a></span></div></td>
    </tr>
            
    <tr id="comment-32893" class="comment">
        <td></td>
        <td class="comment-text"><div><span class="comment-copy">actually I suppose you're right, I'll edit the question.</span> –&nbsp;<a href="http://gamedev.stackexchange.com/users/10079/asher-einhorn" title="1090 reputation" class="comment-user owner">Asher Einhorn</a> <span class="comment-date" dir="ltr"><a class="comment-link" onclick="StackExchange.question.highlightComment(32893, 0)" href="#comment32893_18436"><span title="2011-12-09 12:56:41Z" class="relativetime-clean">Dec 9 '11 at 12:56</span></a></span></div></td>
    </tr>
            
    <tr id="comment-32920" class="comment">
        <td class="comment-actions"><table><tbody><tr>
<td class="comment-score">
<span title="number of 'useful comment' votes received" class="cool">3</span>
</td>
<td>
&nbsp;
</td></tr>
</tbody></table></td>
        <td class="comment-text"><div><span class="comment-copy">As I posted in your other thread, there's a good resource for these types of algorithms here: <a href="http://www.realtimerendering.com/intersections.html" rel="nofollow">realtimerendering.com/intersections.html</a></span> –&nbsp;<a href="http://gamedev.stackexchange.com/users/51/tetrad" title="22720 reputation" class="comment-user">Tetrad<span class="mod-flair" title="moderator">♦</span></a> <span class="comment-date" dir="ltr"><a class="comment-link" onclick="StackExchange.question.highlightComment(32920, 0)" href="#comment32920_18436"><span title="2011-12-09 17:03:27Z" class="relativetime-clean">Dec 9 '11 at 17:03</span></a></span></div></td>
    </tr>

        </tbody>
    
        </table>
    </div>
    <a id="comments-link-18436" class="comments-link" data-comments-count="6" title="expand to show all comments on this post">show <b>6</b> more comments</a>
    
    <div style="color: rgb(136, 136, 136);" class="was-this-helpful">
        feedback
    </div>
    
</td>
</tr>            </tbody></table>    
</div>


    


<div id="answers">

    <a name="tab-top"></a>
    <div id="answers-header">
        <div class="subheader answers-subheader">
            <h2>
                    7 Answers
            </h2>
            <div id="tabs">
                <a href="http://gamedev.stackexchange.com/questions/18436/most-efficient-aabb-vs-ray-collision-algorithms?answertab=active#tab-top" title="Answers with the latest activity first">active</a>
<a href="http://gamedev.stackexchange.com/questions/18436/most-efficient-aabb-vs-ray-collision-algorithms?answertab=oldest#tab-top" title="Answers in the order they were provided">oldest</a>
<a class="youarehere" href="http://gamedev.stackexchange.com/questions/18436/most-efficient-aabb-vs-ray-collision-algorithms?answertab=votes#tab-top" title="Answers with the highest score first">votes</a>

            </div>
        </div>    
    </div>    





  
    <a name="21030"></a>
    <div id="answer-21030" class="answer accepted-answer" data-answerid="21030">
        <table>
        <tbody><tr>
        <td class="votecell">
            

<div class="vote">
    <input value="21030" type="hidden">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post ">7</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    

            <span class="vote-accepted-on load-accepted-answer-date" title="loading when this answer was accepted...">accepted</span>
 
</div>

        </td>
        


<td class="answercell">
    <div class="post-text"><p>Andrew Woo, who along with John Amanatides developed the raymarching algorithm (DDA) used ubiquitously in raytracers, wrote <a href="http://tog.acm.org/resources/GraphicsGems/gems/RayBox.c" rel="nofollow">this algorithm</a>.
 Rather than being built specifically for integration through a grid 
(eg. a voxel volume) as DDA is (see zacharmarz' answer), this algorithm 
is specifically suited to worlds that are not evenly subdivided, such as
 your typical polyhedra world found in most 3D games.</p>

<p>The approach provides support for 3D, and optionally does backface 
culling. The algorithm is derived from the same principles of 
integration used in DDAs, so it is <em>very</em> quick.  More detail can be found in the original Graphics Gems volume (1990).</p>

<p>Many other approaches specifically for Ray-AABB to be found at <a href="http://www.realtimerendering.com/intersections.html" rel="nofollow">realtimerendering.com</a>.</p>

<p>EDIT: An alternative, branchless approach -- which would be desirable on both GPU &amp; CPU -- may be found <a href="http://users.soe.ucsc.edu/%7Epang/160/f98/Gems/FinalFTP/Light/raybox.c" rel="nofollow">here</a>.</p>
</div>
    <table class="fw">
    <tbody><tr>
    <td class="vt">









<div class="post-menu"><a href="http://gamedev.stackexchange.com/a/21030" title="short permalink to this answer" class="short-link" id="link-post-21030">share</a><span class="lsep">|</span><a href="http://gamedev.stackexchange.com/posts/21030/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td class="post-signature" align="right">


    <div class="user-info ">
        <div class="user-action-time">
                            edited
                             <a href="http://gamedev.stackexchange.com/posts/21030/revisions" title="show all edits to this post"><span title="2012-12-23 14:01:51Z" class="relativetime">Dec 23 at 14:01</span></a>

        </div>
        <div class="user-gravatar32">
            
        </div>
        <div class="user-details">
            <br>
            
        </div>
    </div>
    </td>
            


    <td class="post-signature" align="right">   
       

    

    <div class="user-info user-hover">
        <div style="margin-left: 37px;" class="user-action-time">
                                    answered
 <span title="2011-12-13 20:04:48Z" class="relativetime">Dec 13 '11 at 20:04</span>
        </div>
        <div class="user-gravatar32">
            <a href="http://gamedev.stackexchange.com/users/5473/nick-wiggill"><div class="hat" style="float: left; display: block; width: 0px; height: 0px; overflow: visible; position: relative; left: -4.5px; top: -9.5px;"><div style="width: 40px; height: 25px; background-position: -149px -7px; background-image: url(&quot;http://cdn.prom.sstatic.net/WinterBash/img/sprite-32.png&quot;);"></div></div><div class=""><img src="most-efficient-aabb-vs-ray-collision-algorithms_fichiers/e7a72f7d8c02aaabc041f1d48bed428f.png" alt="" height="32" width="32"></div></a>
        </div>
        <div class="user-details">
            <a href="http://gamedev.stackexchange.com/users/5473/nick-wiggill">Nick Wiggill</a><br>
            <span class="reputation-score" title="reputation score 10900" dir="ltr">10.9k</span><span title="2 gold badges"><span class="badge1"></span><span class="badgecount">2</span></span><span title="17 silver badges"><span class="badge2"></span><span class="badgecount">17</span></span><span title="49 bronze badges"><span class="badge3"></span><span class="badgecount">49</span></span>
        </div>
    </div>

    </td>
    </tr>
    </tbody></table>
</td>        </tr>


<tr>
<td class="votecell"></td>
<td>
    <div id="comments-21030" class="comments">
        <table>
        <tbody>
                    
    <tr id="comment-33336" class="comment">
        <td></td>
        <td class="comment-text"><div><span class="comment-copy">ah! you beat me to it, I just came across it this morning. Great find!</span> –&nbsp;<a href="http://gamedev.stackexchange.com/users/10079/asher-einhorn" title="1090 reputation" class="comment-user owner">Asher Einhorn</a> <span class="comment-date" dir="ltr"><a class="comment-link" onclick="StackExchange.question.highlightComment(33336, 21030)" href="#comment33336_21030"><span title="2011-12-14 09:46:57Z" class="relativetime-clean">Dec 14 '11 at 9:46</span></a></span></div></td>
    </tr>
            
    <tr id="comment-33341" class="comment">
        <td></td>
        <td class="comment-text"><div><span class="comment-copy">Pleasure, Sir. I'd also suggest comparing any algorithms you find on <a href="http://www.gamedev.net/topic/556970-relative-speed-of-various-math-operations-and-comparisons/" rel="nofollow">this</a> sort of basis. (There are more official lists like this elsewhere, but can't find any right now.)</span> –&nbsp;<a href="http://gamedev.stackexchange.com/users/5473/nick-wiggill" title="10900 reputation" class="comment-user">Nick Wiggill</a> <span class="comment-date" dir="ltr"><a class="comment-link" onclick="StackExchange.question.highlightComment(33341, 21030)" href="#comment33341_21030"><span title="2011-12-14 11:12:13Z" class="relativetime-clean">Dec 14 '11 at 11:12</span></a></span></div></td>
    </tr>
            
    <tr id="comment-65594" class="comment">
        <td></td>
        <td class="comment-text"><div><span class="comment-copy">The article is <a href="http://books.google.ca/books?id=fvA7zLEFWZgC&amp;pg=PA394&amp;source=gbs_toc_r&amp;cad=4#v=onepage&amp;q&amp;f=false" rel="nofollow">here</a></span> –&nbsp;<a href="http://gamedev.stackexchange.com/users/998/bobobobo" title="4742 reputation" class="comment-user">bobobobo</a> <span class="comment-date" dir="ltr"><a class="comment-link" onclick="StackExchange.question.highlightComment(65594, 21030)" href="#comment65594_21030"><span title="2012-10-13 13:45:36Z" class="relativetime-clean">Oct 13 at 13:45</span></a></span></div></td>
    </tr>
            
    <tr id="comment-75394" class="comment">
        <td></td>
        <td class="comment-text"><div><span class="comment-copy">A well commented implementation of Woo's algorithm may be found <a href="http://users.soe.ucsc.edu/%7Epang/160/f98/Gems/FinalFTP/Light/raybox.c" rel="nofollow">here</a>.</span> –&nbsp;<a href="http://gamedev.stackexchange.com/users/5473/nick-wiggill" title="10900 reputation" class="comment-user">Nick Wiggill</a> <span class="comment-date" dir="ltr"><a class="comment-link" onclick="StackExchange.question.highlightComment(75394, 21030)" href="#comment75394_21030"><span title="2012-12-23 14:03:28Z" class="relativetime-clean">Dec 23 at 14:03</span></a></span></div></td>
    </tr>

        </tbody>
    
        </table>
    </div>
    
    
    <div style="color: rgb(136, 136, 136);" class="was-this-helpful">
        feedback
    </div>
    
</td>
</tr>            </tbody></table>
</div>


  
    <a name="18459"></a>
    <div id="answer-18459" class="answer" data-answerid="18459">
        <table>
        <tbody><tr>
        <td class="votecell">
            

<div class="vote">
    <input value="18459" type="hidden">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post ">3</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    

<div class="bounty-award-container"><span class="bounty-award" title="This answer has been awarded bounty worth 50 reputation by Asher Einhorn">+50</span></div> 
</div>

        </td>
        


<td class="answercell">
    <div class="post-text"><p>What I have been using earlier in my raytracer:</p>

<pre style="" class="default prettyprint prettyprinted"><code><span class="com">// r.dir is unit direction vector of ray</span><span class="pln">
dirfrac</span><span class="pun">.</span><span class="pln">x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> r</span><span class="pun">.</span><span class="pln">dir</span><span class="pun">.</span><span class="pln">x</span><span class="pun">;</span><span class="pln">
dirfrac</span><span class="pun">.</span><span class="pln">y </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> r</span><span class="pun">.</span><span class="pln">dir</span><span class="pun">.</span><span class="pln">y</span><span class="pun">;</span><span class="pln">
dirfrac</span><span class="pun">.</span><span class="pln">z </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> r</span><span class="pun">.</span><span class="pln">dir</span><span class="pun">.</span><span class="pln">z</span><span class="pun">;</span><span class="pln">
</span><span class="com">// lb is the corner of AABB with minimal coordinates - left bottom, rt is maximal corner</span><span class="pln">
</span><span class="com">// r.org is origin of ray</span><span class="pln">
</span><span class="kwd">float</span><span class="pln"> t1 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">lb</span><span class="pun">.</span><span class="pln">x </span><span class="pun">-</span><span class="pln"> r</span><span class="pun">.</span><span class="pln">org</span><span class="pun">.</span><span class="pln">x</span><span class="pun">)*</span><span class="pln">dirfrac</span><span class="pun">.</span><span class="pln">x</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">float</span><span class="pln"> t2 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">rt</span><span class="pun">.</span><span class="pln">x </span><span class="pun">-</span><span class="pln"> r</span><span class="pun">.</span><span class="pln">org</span><span class="pun">.</span><span class="pln">x</span><span class="pun">)*</span><span class="pln">dirfrac</span><span class="pun">.</span><span class="pln">x</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">float</span><span class="pln"> t3 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">lb</span><span class="pun">.</span><span class="pln">y </span><span class="pun">-</span><span class="pln"> r</span><span class="pun">.</span><span class="pln">org</span><span class="pun">.</span><span class="pln">y</span><span class="pun">)*</span><span class="pln">dirfrac</span><span class="pun">.</span><span class="pln">y</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">float</span><span class="pln"> t4 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">rt</span><span class="pun">.</span><span class="pln">y </span><span class="pun">-</span><span class="pln"> r</span><span class="pun">.</span><span class="pln">org</span><span class="pun">.</span><span class="pln">y</span><span class="pun">)*</span><span class="pln">dirfrac</span><span class="pun">.</span><span class="pln">y</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">float</span><span class="pln"> t5 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">lb</span><span class="pun">.</span><span class="pln">z </span><span class="pun">-</span><span class="pln"> r</span><span class="pun">.</span><span class="pln">org</span><span class="pun">.</span><span class="pln">z</span><span class="pun">)*</span><span class="pln">dirfrac</span><span class="pun">.</span><span class="pln">z</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">float</span><span class="pln"> t6 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">rt</span><span class="pun">.</span><span class="pln">z </span><span class="pun">-</span><span class="pln"> r</span><span class="pun">.</span><span class="pln">org</span><span class="pun">.</span><span class="pln">z</span><span class="pun">)*</span><span class="pln">dirfrac</span><span class="pun">.</span><span class="pln">z</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">float</span><span class="pln"> tmin </span><span class="pun">=</span><span class="pln"> max</span><span class="pun">(</span><span class="pln">max</span><span class="pun">(</span><span class="pln">min</span><span class="pun">(</span><span class="pln">t1</span><span class="pun">,</span><span class="pln"> t2</span><span class="pun">),</span><span class="pln"> min</span><span class="pun">(</span><span class="pln">t3</span><span class="pun">,</span><span class="pln"> t4</span><span class="pun">)),</span><span class="pln"> min</span><span class="pun">(</span><span class="pln">t5</span><span class="pun">,</span><span class="pln"> t6</span><span class="pun">));</span><span class="pln">
</span><span class="kwd">float</span><span class="pln"> tmax </span><span class="pun">=</span><span class="pln"> min</span><span class="pun">(</span><span class="pln">min</span><span class="pun">(</span><span class="pln">max</span><span class="pun">(</span><span class="pln">t1</span><span class="pun">,</span><span class="pln"> t2</span><span class="pun">),</span><span class="pln"> max</span><span class="pun">(</span><span class="pln">t3</span><span class="pun">,</span><span class="pln"> t4</span><span class="pun">)),</span><span class="pln"> max</span><span class="pun">(</span><span class="pln">t5</span><span class="pun">,</span><span class="pln"> t6</span><span class="pun">));</span><span class="pln">

</span><span class="com">// if tmax &lt; 0, ray (line) is intersecting AABB, but whole AABB is behing us</span><span class="pln">
</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">tmax </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    t </span><span class="pun">=</span><span class="pln"> tmax</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="com">// if tmin &gt; tmax, ray doesn't intersect AABB</span><span class="pln">
</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">tmin </span><span class="pun">&gt;</span><span class="pln"> tmax</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    t </span><span class="pun">=</span><span class="pln"> tmax</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

t </span><span class="pun">=</span><span class="pln"> tmin</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></pre>

<p>If this returns true, it's intersecting, if it returns false, it's not intersecting. </p>

<p>If you use the same ray many times, you can precompute <code>dirfrac</code>
 (only division in whole intersection test). And then it's really fast. 
And you have also length of ray until intersection (stored in <code>t</code>).</p>
</div>
    <table class="fw">
    <tbody><tr>
    <td class="vt">









<div class="post-menu"><a href="http://gamedev.stackexchange.com/a/18459" title="short permalink to this answer" class="short-link" id="link-post-18459">share</a><span class="lsep">|</span><a href="http://gamedev.stackexchange.com/posts/18459/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
            


    <td class="post-signature" align="right">   
       

    

    <div class="user-info user-hover">
        <div class="user-action-time">
                                    answered
 <span title="2011-10-12 18:22:09Z" class="relativetime">Oct 12 '11 at 18:22</span>
        </div>
        <div class="user-gravatar32">
            <a href="http://gamedev.stackexchange.com/users/4947/zacharmarz"><div class=""><img src="most-efficient-aabb-vs-ray-collision-algorithms_fichiers/9554efac079f1111581fd4cca07cba33.png" alt="" height="32" width="32"></div></a>
        </div>
        <div class="user-details">
            <a href="http://gamedev.stackexchange.com/users/4947/zacharmarz">zacharmarz</a><br>
            <span class="reputation-score" title="reputation score" dir="ltr">2,504</span><span title="1 gold badge"><span class="badge1"></span><span class="badgecount">1</span></span><span title="2 silver badges"><span class="badge2"></span><span class="badgecount">2</span></span><span title="11 bronze badges"><span class="badge3"></span><span class="badgecount">11</span></span>
        </div>
    </div>

    </td>
    </tr>
    </tbody></table>
</td>        </tr>


<tr>
<td class="votecell"></td>
<td>
    <div id="comments-18459" class="comments">
        <table>
        <tbody>
                    
    <tr id="comment-28828" class="comment">
        <td></td>
        <td class="comment-text"><div><span class="comment-copy">would it be possible to provide a key for what your variable names mean?</span> –&nbsp;<a href="http://gamedev.stackexchange.com/users/10079/asher-einhorn" title="1090 reputation" class="comment-user owner">Asher Einhorn</a> <span class="comment-date" dir="ltr"><a class="comment-link" onclick="StackExchange.question.highlightComment(28828, 18459)" href="#comment28828_18459"><span title="2011-10-14 08:48:00Z" class="relativetime-clean">Oct 14 '11 at 8:48</span></a></span></div></td>
    </tr>
            
    <tr id="comment-28830" class="comment">
        <td></td>
        <td class="comment-text"><div><span class="comment-copy">I tried
 to add some explanation in comments. So: "r" is ray, "r.dir" is its 
unit direction vector, "r.org" is origin, from which you shoot ray, 
"dirfrac" is just optimization, because you can use it always for the 
same ray (you don't have to do division) and it means 1 / r.dir. Then 
"lb" is corner of AABB with all 3 coordinates minimal and "rb" is 
oposite - corner with maximum coordinates. Output parametr "t" is length
 of vector from origin to intersection.</span> –&nbsp;<a href="http://gamedev.stackexchange.com/users/4947/zacharmarz" title="2504 reputation" class="comment-user">zacharmarz</a> <span class="comment-date" dir="ltr"><a class="comment-link" onclick="StackExchange.question.highlightComment(28830, 18459)" href="#comment28830_18459"><span title="2011-10-14 09:28:54Z" class="relativetime-clean">Oct 14 '11 at 9:28</span></a></span></div></td>
    </tr>
            
    <tr id="comment-32881" class="comment">
        <td></td>
        <td class="comment-text"><div><span class="comment-copy">what does the function definition look like? Is it possible to find out the distance that the collision occurred on the ray?</span> –&nbsp;<a href="http://gamedev.stackexchange.com/users/10079/asher-einhorn" title="1090 reputation" class="comment-user owner">Asher Einhorn</a> <span class="comment-date" dir="ltr"><a class="comment-link" onclick="StackExchange.question.highlightComment(32881, 18459)" href="#comment32881_18459"><span title="2011-12-09 11:16:12Z" class="relativetime-clean">Dec 9 '11 at 11:16</span></a></span></div></td>
    </tr>
            
    <tr id="comment-32884" class="comment">
        <td></td>
        <td class="comment-text"><div><span class="comment-copy">function returns distance ('t' is distance). And function definition can be whatever you want ;) You should pass ray, lb and rt.</span> –&nbsp;<a href="http://gamedev.stackexchange.com/users/4947/zacharmarz" title="2504 reputation" class="comment-user">zacharmarz</a> <span class="comment-date" dir="ltr"><a class="comment-link" onclick="StackExchange.question.highlightComment(32884, 18459)" href="#comment32884_18459"><span title="2011-12-09 12:01:58Z" class="relativetime-clean">Dec 9 '11 at 12:01</span></a></span></div></td>
    </tr>
            
    <tr id="comment-32887" class="comment">
        <td></td>
        <td class="comment-text"><div><span class="comment-copy">it seems to me like the return type for this code would be a bool?</span> –&nbsp;<a href="http://gamedev.stackexchange.com/users/10079/asher-einhorn" title="1090 reputation" class="comment-user owner">Asher Einhorn</a> <span class="comment-date" dir="ltr"><a class="comment-link" onclick="StackExchange.question.highlightComment(32887, 18459)" href="#comment32887_18459"><span title="2011-12-09 12:37:20Z" class="relativetime-clean">Dec 9 '11 at 12:37</span></a></span><span class="edited-yes" title="this comment was edited"></span></div></td>
    </tr>

        </tbody>
    
        </table>
    </div>
    <a id="comments-link-18459" class="comments-link" data-comments-count="23" title="expand to show all comments on this post">show <b>23</b> more comments</a>
    
    <div style="color: rgb(136, 136, 136);" class="was-this-helpful">
        feedback
    </div>
    
</td>
</tr>            </tbody></table>
</div>


  
    <a name="24464"></a>
    <div id="answer-24464" class="answer" data-answerid="24464">
        <table>
        <tbody><tr>
        <td class="votecell">
            

<div class="vote">
    <input value="24464" type="hidden">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post ">2</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    

 
</div>

        </td>
        


<td class="answercell">
    <div class="post-text"><p>This is my 3D ray / AABox intersection I've been using:</p>

<pre style="" class="default prettyprint prettyprinted"><code><span class="kwd">bool</span><span class="pln"> intersectRayAABox2</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Ray</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">ray</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Box</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">box</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">&amp;</span><span class="pln"> tnear</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">&amp;</span><span class="pln"> tfar</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="typ">Vector3d</span><span class="pln"> T_1</span><span class="pun">,</span><span class="pln"> T_2</span><span class="pun">;</span><span class="pln"> </span><span class="com">// vectors to hold the T-values for every direction</span><span class="pln">
    </span><span class="kwd">double</span><span class="pln"> t_near </span><span class="pun">=</span><span class="pln"> </span><span class="pun">-</span><span class="pln">DBL_MAX</span><span class="pun">;</span><span class="pln"> </span><span class="com">// maximums defined in float.h</span><span class="pln">
    </span><span class="kwd">double</span><span class="pln"> t_far </span><span class="pun">=</span><span class="pln"> DBL_MAX</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">3</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++){</span><span class="pln"> </span><span class="com">//we test slabs in every direction</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ray</span><span class="pun">.</span><span class="pln">direction</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">){</span><span class="pln"> </span><span class="com">// ray parallel to planes in this direction</span><span class="pln">
            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">((</span><span class="pln">ray</span><span class="pun">.</span><span class="pln">origin</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> box</span><span class="pun">.</span><span class="pln">min</span><span class="pun">[</span><span class="pln">i</span><span class="pun">])</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ray</span><span class="pun">.</span><span class="pln">origin</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> box</span><span class="pun">.</span><span class="pln">max</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln"> </span><span class="com">// parallel AND outside box : no intersection possible</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">
        </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="com">// ray not parallel to planes in this direction</span><span class="pln">
            T_1</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">box</span><span class="pun">.</span><span class="pln">min</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> ray</span><span class="pun">.</span><span class="pln">origin</span><span class="pun">[</span><span class="pln">i</span><span class="pun">])</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> ray</span><span class="pun">.</span><span class="pln">direction</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span><span class="pln">
            T_2</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">box</span><span class="pun">.</span><span class="pln">max</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> ray</span><span class="pun">.</span><span class="pln">origin</span><span class="pun">[</span><span class="pln">i</span><span class="pun">])</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> ray</span><span class="pun">.</span><span class="pln">direction</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span><span class="pln">

            </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">T_1</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> T_2</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]){</span><span class="pln"> </span><span class="com">// we want T_1 to hold values for intersection with near plane</span><span class="pln">
                swap</span><span class="pun">(</span><span class="pln">T_1</span><span class="pun">,</span><span class="pln">T_2</span><span class="pun">);</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">
            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">T_1</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> t_near</span><span class="pun">){</span><span class="pln">
                t_near </span><span class="pun">=</span><span class="pln"> T_1</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">
            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">T_2</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> t_far</span><span class="pun">){</span><span class="pln">
                t_far </span><span class="pun">=</span><span class="pln"> T_2</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">
            </span><span class="kwd">if</span><span class="pun">(</span><span class="pln"> </span><span class="pun">(</span><span class="pln">t_near </span><span class="pun">&gt;</span><span class="pln"> t_far</span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">(</span><span class="pln">t_far </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">){</span><span class="pln">
                </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    tnear </span><span class="pun">=</span><span class="pln"> t_near</span><span class="pun">;</span><span class="pln"> tfar </span><span class="pun">=</span><span class="pln"> t_far</span><span class="pun">;</span><span class="pln"> </span><span class="com">// put return values in place</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln"> </span><span class="com">// if we made it here, there was an intersection - YAY</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
    <table class="fw">
    <tbody><tr>
    <td class="vt">









<div class="post-menu"><a href="http://gamedev.stackexchange.com/a/24464" title="short permalink to this answer" class="short-link" id="link-post-24464">share</a><span class="lsep">|</span><a href="http://gamedev.stackexchange.com/posts/24464/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
            


    <td class="post-signature" align="right">   
       

    

    <div class="user-info ">
        <div class="user-action-time">
                                    answered
 <span title="2012-02-24 16:17:12Z" class="relativetime">Feb 24 at 16:17</span>
        </div>
        <div class="user-gravatar32">
            <a href="http://gamedev.stackexchange.com/users/13808/jeroen-baert"><div class=""><img src="most-efficient-aabb-vs-ray-collision-algorithms_fichiers/7c535caf1553c801072ccb730ea6558b.jpg" alt="" height="32" width="32"></div></a>
        </div>
        <div class="user-details">
            <a href="http://gamedev.stackexchange.com/users/13808/jeroen-baert">Jeroen Baert</a><br>
            <span class="reputation-score" title="reputation score" dir="ltr">161</span><span title="3 bronze badges"><span class="badge3"></span><span class="badgecount">3</span></span>
        </div>
    </div>

    </td>
    </tr>
    </tbody></table>
</td>        </tr>


<tr>
<td class="votecell"></td>
<td>
    <div id="comments-24464" class="comments dno">
        <table>
        <tbody>
        
            <tr><td></td><td></td></tr>
        
        </tbody>
    
        </table>
    </div>
    
    
    <div style="color: rgb(136, 136, 136);" class="was-this-helpful">
        feedback
    </div>
    
</td>
</tr>            </tbody></table>
</div>


  
    <a name="21029"></a>
    <div id="answer-21029" class="answer" data-answerid="21029">
        <table>
        <tbody><tr>
        <td class="votecell">
            

<div class="vote">
    <input value="21029" type="hidden">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post ">1</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    

 
</div>

        </td>
        


<td class="answercell">
    <div class="post-text"><p>One thing you might want to investigate is
 rasterizing the front and backfaces of your bounding box in two 
seperate buffers.  Render the x,y,z values as rgb (this works best for a
 bounding box with one corner at (0,0,0) and the opposite at (1,1,1).</p>

<p>Obviously, this has limited use but I found it great for rendering simple volumes.</p>

<p>For more detail and code:</p>

<p><a href="http://www.daimi.au.dk/%7Etrier/?page_id=98" rel="nofollow">http://www.daimi.au.dk/~trier/?page_id=98</a></p>
</div>
    <table class="fw">
    <tbody><tr>
    <td class="vt">









<div class="post-menu"><a href="http://gamedev.stackexchange.com/a/21029" title="short permalink to this answer" class="short-link" id="link-post-21029">share</a><span class="lsep">|</span><a href="http://gamedev.stackexchange.com/posts/21029/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
            


    <td class="post-signature" align="right">   
       

    

    <div class="user-info ">
        <div class="user-action-time">
                                    answered
 <span title="2011-12-13 19:41:11Z" class="relativetime">Dec 13 '11 at 19:41</span>
        </div>
        <div class="user-gravatar32">
            <a href="http://gamedev.stackexchange.com/users/11819/gavan-woolery"><div class=""><img src="most-efficient-aabb-vs-ray-collision-algorithms_fichiers/fb1c7a95d7a36583b849c390827f302f.jpg" alt="" height="32" width="32"></div></a>
        </div>
        <div class="user-details">
            <a href="http://gamedev.stackexchange.com/users/11819/gavan-woolery">Gavan Woolery</a><br>
            <span class="reputation-score" title="reputation score" dir="ltr">514</span><span title="3 silver badges"><span class="badge2"></span><span class="badgecount">3</span></span><span title="6 bronze badges"><span class="badge3"></span><span class="badgecount">6</span></span>
        </div>
    </div>

    </td>
    </tr>
    </tbody></table>
</td>        </tr>


<tr>
<td class="votecell"></td>
<td>
    <div id="comments-21029" class="comments dno">
        <table>
        <tbody>
        
            <tr><td></td><td></td></tr>
        
        </tbody>
    
        </table>
    </div>
    
    
    <div style="color: rgb(136, 136, 136);" class="was-this-helpful">
        feedback
    </div>
    
</td>
</tr>            </tbody></table>
</div>


  
    <a name="21036"></a>
    <div id="answer-21036" class="answer" data-answerid="21036">
        <table>
        <tbody><tr>
        <td class="votecell">
            

<div class="vote">
    <input value="21036" type="hidden">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post ">1</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    

 
</div>

        </td>
        


<td class="answercell">
    <div class="post-text"><p>Here's the Line vs AABB code I've been using:</p>

<pre style="" class="default prettyprint prettyprinted"><code><span class="kwd">namespace</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">//Helper function for Line/AABB test.  Tests collision on a single dimension</span><span class="pln">
    </span><span class="com">//Param:    Start of line, Direction/length of line,</span><span class="pln">
    </span><span class="com">//          Min value of AABB on plane, Max value of AABB on plane</span><span class="pln">
    </span><span class="com">//          Enter and Exit "timestamps" of intersection (OUT)</span><span class="pln">
    </span><span class="com">//Return:   True if there is overlap between Line and AABB, False otherwise</span><span class="pln">
    </span><span class="com">//Note:     Enter and Exit are used for calculations and are only updated in case of intersection</span><span class="pln">
    </span><span class="kwd">bool</span><span class="pln"> </span><span class="typ">Line_AABB_1d</span><span class="pun">(</span><span class="kwd">float</span><span class="pln"> start</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> dir</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> min</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pln"> max</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pun">&amp;</span><span class="pln"> enter</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">float</span><span class="pun">&amp;</span><span class="pln"> </span><span class="kwd">exit</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//If the line segment is more of a point, just check if it's within the segment</span><span class="pln">
        </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">fabs</span><span class="pun">(</span><span class="pln">dir</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">1.0E-8</span><span class="pun">)</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="pln">start </span><span class="pun">&gt;=</span><span class="pln"> min </span><span class="pun">&amp;&amp;</span><span class="pln"> start </span><span class="pun">&lt;=</span><span class="pln"> max</span><span class="pun">);</span><span class="pln">

        </span><span class="com">//Find if the lines overlap</span><span class="pln">
        </span><span class="kwd">float</span><span class="pln">   ooDir </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> dir</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">float</span><span class="pln">   t0 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">min </span><span class="pun">-</span><span class="pln"> start</span><span class="pun">)</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> ooDir</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">float</span><span class="pln">   t1 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">max </span><span class="pun">-</span><span class="pln"> start</span><span class="pun">)</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> ooDir</span><span class="pun">;</span><span class="pln">

        </span><span class="com">//Make sure t0 is the "first" of the intersections</span><span class="pln">
        </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">t0 </span><span class="pun">&gt;</span><span class="pln"> t1</span><span class="pun">)</span><span class="pln">
            </span><span class="typ">Math</span><span class="pun">::</span><span class="typ">Swap</span><span class="pun">(</span><span class="pln">t0</span><span class="pun">,</span><span class="pln"> t1</span><span class="pun">);</span><span class="pln">

        </span><span class="com">//Check if intervals are disjoint</span><span class="pln">
        </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">t0 </span><span class="pun">&gt;</span><span class="pln"> </span><span class="kwd">exit</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> t1 </span><span class="pun">&lt;</span><span class="pln"> enter</span><span class="pun">)</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">

        </span><span class="com">//Reduce interval based on intersection</span><span class="pln">
        </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">t0 </span><span class="pun">&gt;</span><span class="pln"> enter</span><span class="pun">)</span><span class="pln">
            enter </span><span class="pun">=</span><span class="pln"> t0</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">t1 </span><span class="pun">&lt;</span><span class="pln"> </span><span class="kwd">exit</span><span class="pun">)</span><span class="pln">
            </span><span class="kwd">exit</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> t1</span><span class="pun">;</span><span class="pln">

        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="com">//Check collision between a line segment and an AABB</span><span class="pln">
</span><span class="com">//Param:    Start point of line segement, End point of line segment,</span><span class="pln">
</span><span class="com">//          One corner of AABB, opposite corner of AABB,</span><span class="pln">
</span><span class="com">//          Location where line hits the AABB (OUT)</span><span class="pln">
</span><span class="com">//Return:   True if a collision occurs, False otherwise</span><span class="pln">
</span><span class="com">//Note:     If no collision occurs, OUT param is not reassigned and is not considered useable</span><span class="pln">
</span><span class="kwd">bool</span><span class="pln"> </span><span class="typ">CollisionDetection</span><span class="pun">::</span><span class="typ">Line_AABB</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Vector3D</span><span class="pun">&amp;</span><span class="pln"> s</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Vector3D</span><span class="pun">&amp;</span><span class="pln"> e</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Vector3D</span><span class="pun">&amp;</span><span class="pln"> min</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Vector3D</span><span class="pun">&amp;</span><span class="pln"> max</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Vector3D</span><span class="pun">&amp;</span><span class="pln"> hitPoint</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">float</span><span class="pln">       enter </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0.0f</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">float</span><span class="pln">       </span><span class="kwd">exit</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1.0f</span><span class="pun">;</span><span class="pln">
    </span><span class="typ">Vector3D</span><span class="pln">    dir </span><span class="pun">=</span><span class="pln"> e </span><span class="pun">-</span><span class="pln"> s</span><span class="pun">;</span><span class="pln">

    </span><span class="com">//Check each dimension of Line/AABB for intersection</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(!</span><span class="typ">Line_AABB_1d</span><span class="pun">(</span><span class="pln">s</span><span class="pun">.</span><span class="pln">x</span><span class="pun">,</span><span class="pln"> dir</span><span class="pun">.</span><span class="pln">x</span><span class="pun">,</span><span class="pln"> min</span><span class="pun">.</span><span class="pln">x</span><span class="pun">,</span><span class="pln"> max</span><span class="pun">.</span><span class="pln">x</span><span class="pun">,</span><span class="pln"> enter</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">exit</span><span class="pun">))</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(!</span><span class="typ">Line_AABB_1d</span><span class="pun">(</span><span class="pln">s</span><span class="pun">.</span><span class="pln">y</span><span class="pun">,</span><span class="pln"> dir</span><span class="pun">.</span><span class="pln">y</span><span class="pun">,</span><span class="pln"> min</span><span class="pun">.</span><span class="pln">y</span><span class="pun">,</span><span class="pln"> max</span><span class="pun">.</span><span class="pln">y</span><span class="pun">,</span><span class="pln"> enter</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">exit</span><span class="pun">))</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(!</span><span class="typ">Line_AABB_1d</span><span class="pun">(</span><span class="pln">s</span><span class="pun">.</span><span class="pln">z</span><span class="pun">,</span><span class="pln"> dir</span><span class="pun">.</span><span class="pln">z</span><span class="pun">,</span><span class="pln"> min</span><span class="pun">.</span><span class="pln">z</span><span class="pun">,</span><span class="pln"> max</span><span class="pun">.</span><span class="pln">z</span><span class="pun">,</span><span class="pln"> enter</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">exit</span><span class="pun">))</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">

    </span><span class="com">//If there is intersection on all dimensions, report that point</span><span class="pln">
    hitPoint </span><span class="pun">=</span><span class="pln"> s </span><span class="pun">+</span><span class="pln"> dir </span><span class="pun">*</span><span class="pln"> enter</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
    <table class="fw">
    <tbody><tr>
    <td class="vt">









<div class="post-menu"><a href="http://gamedev.stackexchange.com/a/21036" title="short permalink to this answer" class="short-link" id="link-post-21036">share</a><span class="lsep">|</span><a href="http://gamedev.stackexchange.com/posts/21036/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
            


    <td class="post-signature" align="right">   
       

    

    <div class="user-info user-hover">
        <div class="user-action-time">
                                    answered
 <span title="2011-12-13 22:31:09Z" class="relativetime">Dec 13 '11 at 22:31</span>
        </div>
        <div class="user-gravatar32">
            <a href="http://gamedev.stackexchange.com/users/3051/chaostechnician"><div class=""><img src="most-efficient-aabb-vs-ray-collision-algorithms_fichiers/383c59a2206254ad798dfb8f1521be27.jpg" alt="" height="32" width="32"></div></a>
        </div>
        <div class="user-details">
            <a href="http://gamedev.stackexchange.com/users/3051/chaostechnician">chaosTechnician</a><br>
            <span class="reputation-score" title="reputation score" dir="ltr">1,457</span><span title="2 silver badges"><span class="badge2"></span><span class="badgecount">2</span></span><span title="13 bronze badges"><span class="badge3"></span><span class="badgecount">13</span></span>
        </div>
    </div>

    </td>
    </tr>
    </tbody></table>
</td>        </tr>


<tr>
<td class="votecell"></td>
<td>
    <div id="comments-21036" class="comments dno">
        <table>
        <tbody>
        
            <tr><td></td><td></td></tr>
        
        </tbody>
    
        </table>
    </div>
    
    
    <div style="color: rgb(136, 136, 136);" class="was-this-helpful">
        feedback
    </div>
    
</td>
</tr>            </tbody></table>
</div>


  
    <a name="18466"></a>
    <div id="answer-18466" class="answer" data-answerid="18466">
        <table>
        <tbody><tr>
        <td class="votecell">
            

<div class="vote">
    <input value="18466" type="hidden">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post ">0</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    

 
</div>

        </td>
        


<td class="answercell">
    <div class="post-text"><p>This seems similar to the code posted by zacharmarz.<br>
I got this code from the book 'Real-Time Collision Detection' by 
Christer Ericson under the section '5.3.3  Intersecting Ray or Segment 
Against Box'</p>

<pre style="" class="default prettyprint prettyprinted"><code><span class="com">// Where your AABB is defined by left, right, top, bottom</span><span class="pln">

</span><span class="com">// The direction of the ray</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> dx</span><span class="pun">:</span><span class="typ">Number</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> point2</span><span class="pun">.</span><span class="pln">x </span><span class="pun">-</span><span class="pln"> point1</span><span class="pun">.</span><span class="pln">x</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> dy</span><span class="pun">:</span><span class="typ">Number</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> point2</span><span class="pun">.</span><span class="pln">y </span><span class="pun">-</span><span class="pln"> point1</span><span class="pun">.</span><span class="pln">y</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">var</span><span class="pln"> min</span><span class="pun">:</span><span class="typ">Number</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> max</span><span class="pun">:</span><span class="typ">Number</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">var</span><span class="pln"> t0</span><span class="pun">:</span><span class="typ">Number</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> t1</span><span class="pun">:</span><span class="typ">Number</span><span class="pun">;</span><span class="pln">

</span><span class="com">// Left and right sides.</span><span class="pln">
</span><span class="com">// - If the line is parallel to the y axis.</span><span class="pln">
</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">dx </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">){</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">point1</span><span class="pun">.</span><span class="pln">x </span><span class="pun">&lt;</span><span class="pln"> left </span><span class="pun">||</span><span class="pln"> point1</span><span class="pun">.</span><span class="pln">x </span><span class="pun">&gt;</span><span class="pln"> right</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="com">// - Make sure t0 holds the smaller value by checking the direction of the line.</span><span class="pln">
</span><span class="kwd">else</span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">dx </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">){</span><span class="pln">
        t0 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">left </span><span class="pun">-</span><span class="pln"> point1</span><span class="pun">.</span><span class="pln">x</span><span class="pun">)/</span><span class="pln">dx</span><span class="pun">;</span><span class="pln">
        t1 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">right </span><span class="pun">-</span><span class="pln"> point1</span><span class="pun">.</span><span class="pln">x</span><span class="pun">)/</span><span class="pln">dx</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">else</span><span class="pun">{</span><span class="pln">
        t1 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">left </span><span class="pun">-</span><span class="pln"> point1</span><span class="pun">.</span><span class="pln">x</span><span class="pun">)/</span><span class="pln">dx</span><span class="pun">;</span><span class="pln">
        t0 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">right </span><span class="pun">-</span><span class="pln"> point1</span><span class="pun">.</span><span class="pln">x</span><span class="pun">)/</span><span class="pln">dx</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">t0 </span><span class="pun">&gt;</span><span class="pln"> min</span><span class="pun">)</span><span class="pln"> min </span><span class="pun">=</span><span class="pln"> t0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">t1 </span><span class="pun">&lt;</span><span class="pln"> max</span><span class="pun">)</span><span class="pln"> max </span><span class="pun">=</span><span class="pln"> t1</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">min </span><span class="pun">&gt;</span><span class="pln"> max </span><span class="pun">||</span><span class="pln"> max </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="com">// The top and bottom side.</span><span class="pln">
</span><span class="com">// - If the line is parallel to the x axis.</span><span class="pln">
</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">dy </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">){</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">point1</span><span class="pun">.</span><span class="pln">y </span><span class="pun">&lt;</span><span class="pln"> top </span><span class="pun">||</span><span class="pln"> point1</span><span class="pun">.</span><span class="pln">y </span><span class="pun">&gt;</span><span class="pln"> bottom</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="com">// - Make sure t0 holds the smaller value by checking the direction of the line.</span><span class="pln">
</span><span class="kwd">else</span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">dy </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">){</span><span class="pln">
        t0 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">top </span><span class="pun">-</span><span class="pln"> point1</span><span class="pun">.</span><span class="pln">y</span><span class="pun">)/</span><span class="pln">dy</span><span class="pun">;</span><span class="pln">
        t1 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">bottom </span><span class="pun">-</span><span class="pln"> point1</span><span class="pun">.</span><span class="pln">y</span><span class="pun">)/</span><span class="pln">dy</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">else</span><span class="pun">{</span><span class="pln">
        t1 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">top </span><span class="pun">-</span><span class="pln"> point1</span><span class="pun">.</span><span class="pln">y</span><span class="pun">)/</span><span class="pln">dy</span><span class="pun">;</span><span class="pln">
        t0 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">bottom </span><span class="pun">-</span><span class="pln"> point1</span><span class="pun">.</span><span class="pln">y</span><span class="pun">)/</span><span class="pln">dy</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">t0 </span><span class="pun">&gt;</span><span class="pln"> min</span><span class="pun">)</span><span class="pln"> min </span><span class="pun">=</span><span class="pln"> t0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">t1 </span><span class="pun">&lt;</span><span class="pln"> max</span><span class="pun">)</span><span class="pln"> max </span><span class="pun">=</span><span class="pln"> t1</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">min </span><span class="pun">&gt;</span><span class="pln"> max </span><span class="pun">||</span><span class="pln"> max </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="com">// The point of intersection</span><span class="pln">
ix </span><span class="pun">=</span><span class="pln"> point1</span><span class="pun">.</span><span class="pln">x </span><span class="pun">+</span><span class="pln"> dx </span><span class="pun">*</span><span class="pln"> min</span><span class="pun">;</span><span class="pln">
iy </span><span class="pun">=</span><span class="pln"> point1</span><span class="pun">.</span><span class="pln">y </span><span class="pun">+</span><span class="pln"> dy </span><span class="pun">*</span><span class="pln"> min</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></pre>
</div>
    <table class="fw">
    <tbody><tr>
    <td class="vt">









<div class="post-menu"><a href="http://gamedev.stackexchange.com/a/18466" title="short permalink to this answer" class="short-link" id="link-post-18466">share</a><span class="lsep">|</span><a href="http://gamedev.stackexchange.com/posts/18466/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
            


    <td class="post-signature" align="right">   
       

    

    <div class="user-info ">
        <div class="user-action-time">
                                    answered
 <span title="2011-10-12 20:17:16Z" class="relativetime">Oct 12 '11 at 20:17</span>
        </div>
        <div class="user-gravatar32">
            <span class="anonymous-gravatar"></span>
        </div>
        <div class="user-details">
            user10479<br>
            
        </div>
    </div>

    </td>
    </tr>
    </tbody></table>
</td>        </tr>


<tr>
<td class="votecell"></td>
<td>
    <div id="comments-18466" class="comments">
        <table>
        <tbody>
                    
    <tr id="comment-32888" class="comment">
        <td></td>
        <td class="comment-text"><div><span class="comment-copy">this is 2d, yes?</span> –&nbsp;<a href="http://gamedev.stackexchange.com/users/10079/asher-einhorn" title="1090 reputation" class="comment-user owner">Asher Einhorn</a> <span class="comment-date" dir="ltr"><a class="comment-link" onclick="StackExchange.question.highlightComment(32888, 18466)" href="#comment32888_18466"><span title="2011-12-09 12:41:59Z" class="relativetime-clean">Dec 9 '11 at 12:41</span></a></span></div></td>
    </tr>
            
    <tr id="comment-32898" class="comment">
        <td></td>
        <td class="comment-text"><div><span class="comment-copy">This is
 only 2D, yes. Also, the code does is not as well thought as 
zacharmarz's, which takes care of reducing the number of divisions and 
tests.</span> –&nbsp;<a href="http://gamedev.stackexchange.com/users/5864/sam-hocevar" title="8896 reputation" class="comment-user">Sam Hocevar</a> <span class="comment-date" dir="ltr"><a class="comment-link" onclick="StackExchange.question.highlightComment(32898, 18466)" href="#comment32898_18466"><span title="2011-12-09 14:09:22Z" class="relativetime-clean">Dec 9 '11 at 14:09</span></a></span></div></td>
    </tr>

        </tbody>
    
        </table>
    </div>
    
    
    <div style="color: rgb(136, 136, 136);" class="was-this-helpful">
        feedback
    </div>
    
</td>
</tr>            </tbody></table>
</div>


  
    <a name="39903"></a>
    <div id="answer-39903" class="answer" data-answerid="39903">
        <table>
        <tbody><tr>
        <td class="votecell">
            

<div class="vote">
    <input value="39903" type="hidden">
    <a class="vote-up-off" title="This answer is useful (click again to undo)">up vote</a>
    <span class="vote-count-post ">0</span>
    <a class="vote-down-off" title="This answer is not useful (click again to undo)">down vote</a>
    

 
</div>

        </td>
        


<td class="answercell">
    <div class="post-text"><p>Nobody described the algorithm here, but the <a href="http://books.google.ca/books?id=fvA7zLEFWZgC&amp;pg=PA394&amp;source=gbs_toc_r&amp;cad=4#v=onepage&amp;q&amp;f=false" rel="nofollow">Graphics Gems algorithm</a> is simply:</p>

<ol>
<li><p>Using your ray's direction vector, determine which 3 of the 6 candidate planes <em>would be hit first</em>.  If your (unnormalized) ray direction vector is (-1, 1, -1), then the 3 planes that are possible to be hit are +x, -y, and +z.</p></li>
<li><p>Of the 3 candidate planes, do find the t-value for the intersection for each.  Accept the plane that gets the <em>largest</em> <strong>t</strong> value as being the plane that got hit, <strong>and check that the hit is within the box</strong>.  The diagram in the text makes this clear:</p></li>
</ol>

<p><img src="most-efficient-aabb-vs-ray-collision-algorithms_fichiers/tfvSJ.png" alt="enter image description here"></p>

<p>My implementation:</p>

<pre style="" class="default prettyprint prettyprinted"><code><span class="kwd">bool</span><span class="pln"> AABB</span><span class="pun">::</span><span class="pln">intersects</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> </span><span class="typ">Ray</span><span class="pun">&amp;</span><span class="pln"> ray </span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
  </span><span class="com">// EZ cases: if the ray starts inside the box, or ends inside</span><span class="pln">
  </span><span class="com">// the box, then it definitely hits the box.</span><span class="pln">
  </span><span class="com">// I'm using this code for ray tracing with an octree,</span><span class="pln">
  </span><span class="com">// so I needed rays that start and end within an</span><span class="pln">
  </span><span class="com">// octree node to COUNT as hits.</span><span class="pln">
  </span><span class="com">// You could modify this test to (ray starts inside and ends outside)</span><span class="pln">
  </span><span class="com">// to qualify as a hit if you wanted to NOT count totally internal rays</span><span class="pln">
  </span><span class="kwd">if</span><span class="pun">(</span><span class="pln"> containsIn</span><span class="pun">(</span><span class="pln"> ray</span><span class="pun">.</span><span class="pln">startPos </span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> containsIn</span><span class="pun">(</span><span class="pln"> ray</span><span class="pun">.</span><span class="pln">getEndPoint</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">;</span><span class="pln"> 

  </span><span class="com">// the algorithm says, find 3 t's,</span><span class="pln">
  </span><span class="typ">Vector</span><span class="pln"> t </span><span class="pun">;</span><span class="pln">

  </span><span class="com">// LARGEST t is the only one we need to test if it's on the face.</span><span class="pln">
  </span><span class="kwd">for</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
  </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln"> ray</span><span class="pun">.</span><span class="pln">direction</span><span class="pun">.</span><span class="pln">e</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="com">// CULL BACK FACE</span><span class="pln">
      t</span><span class="pun">.</span><span class="pln">e</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> min</span><span class="pun">.</span><span class="pln">e</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> ray</span><span class="pun">.</span><span class="pln">startPos</span><span class="pun">.</span><span class="pln">e</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> ray</span><span class="pun">.</span><span class="pln">direction</span><span class="pun">.</span><span class="pln">e</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">else</span><span class="pln">
      t</span><span class="pun">.</span><span class="pln">e</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> max</span><span class="pun">.</span><span class="pln">e</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> ray</span><span class="pun">.</span><span class="pln">startPos</span><span class="pun">.</span><span class="pln">e</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> ray</span><span class="pun">.</span><span class="pln">direction</span><span class="pun">.</span><span class="pln">e</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">int</span><span class="pln"> mi </span><span class="pun">=</span><span class="pln"> t</span><span class="pun">.</span><span class="pln">maxIndex</span><span class="pun">()</span><span class="pln"> </span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">if</span><span class="pun">(</span><span class="pln"> </span><span class="typ">BetweenIn</span><span class="pun">(</span><span class="pln"> t</span><span class="pun">.</span><span class="pln">e</span><span class="pun">[</span><span class="pln">mi</span><span class="pun">],</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> ray</span><span class="pun">.</span><span class="pln">length </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
  </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">Vector</span><span class="pln"> pt </span><span class="pun">=</span><span class="pln"> ray</span><span class="pun">.</span><span class="pln">at</span><span class="pun">(</span><span class="pln"> t</span><span class="pun">.</span><span class="pln">e</span><span class="pun">[</span><span class="pln">mi</span><span class="pun">]</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">;</span><span class="pln">

    </span><span class="com">// check it's in the box in other 2 dimensions</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> o1 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> mi </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">;</span><span class="pln"> </span><span class="com">// i=0: o1=1, o2=2, i=1: o1=2,o2=0 etc.</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> o2 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> mi </span><span class="pun">+</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">BetweenIn</span><span class="pun">(</span><span class="pln"> pt</span><span class="pun">.</span><span class="pln">e</span><span class="pun">[</span><span class="pln">o1</span><span class="pun">],</span><span class="pln"> min</span><span class="pun">.</span><span class="pln">e</span><span class="pun">[</span><span class="pln">o1</span><span class="pun">],</span><span class="pln"> max</span><span class="pun">.</span><span class="pln">e</span><span class="pun">[</span><span class="pln">o1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln">
           </span><span class="typ">BetweenIn</span><span class="pun">(</span><span class="pln"> pt</span><span class="pun">.</span><span class="pln">e</span><span class="pun">[</span><span class="pln">o2</span><span class="pun">],</span><span class="pln"> min</span><span class="pun">.</span><span class="pln">e</span><span class="pun">[</span><span class="pln">o2</span><span class="pun">],</span><span class="pln"> max</span><span class="pun">.</span><span class="pln">e</span><span class="pun">[</span><span class="pln">o2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pln"> </span><span class="pun">;</span><span class="pln"> </span><span class="com">// the ray did not hit the box.</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
    <table class="fw">
    <tbody><tr>
    <td class="vt">









<div class="post-menu"><a href="http://gamedev.stackexchange.com/a/39903" title="short permalink to this answer" class="short-link" id="link-post-39903">share</a><span class="lsep">|</span><a href="http://gamedev.stackexchange.com/posts/39903/edit" class="suggest-edit-post" title="">improve this answer</a></div>                    </td>
    <td class="post-signature" align="right">


    <div class="user-info ">
        <div class="user-action-time">
                            edited
                             <a href="http://gamedev.stackexchange.com/posts/39903/revisions" title="show all edits to this post"><span title="2012-10-15 15:30:42Z" class="relativetime">Oct 15 at 15:30</span></a>

        </div>
        <div class="user-gravatar32">
            
        </div>
        <div class="user-details">
            <br>
            
        </div>
    </div>
    </td>
            


    <td class="post-signature" align="right">   
       

    

    <div class="user-info user-hover">
        <div style="margin-left: 37px;" class="user-action-time">
                                    answered
 <span title="2012-10-13 22:12:12Z" class="relativetime">Oct 13 at 22:12</span>
        </div>
        <div class="user-gravatar32">
            <a href="http://gamedev.stackexchange.com/users/998/bobobobo"><div class="hat" style="float: left; display: block; width: 0px; height: 0px; overflow: visible; position: relative; left: -6.5px; top: -8.75px;"><div style="width: 46px; height: 24px; background-position: -2px -7px; background-image: url(&quot;http://cdn.prom.sstatic.net/WinterBash/img/1423700688-32.png&quot;);"></div></div><div class=""><img src="most-efficient-aabb-vs-ray-collision-algorithms_fichiers/a4ec51727310397c9e592dd84ae74dc2.jpg" alt="" height="32" width="32"></div></a>
        </div>
        <div class="user-details">
            <a href="http://gamedev.stackexchange.com/users/998/bobobobo">bobobobo</a><br>
            <span class="reputation-score" title="reputation score" dir="ltr">4,742</span><span title="2 gold badges"><span class="badge1"></span><span class="badgecount">2</span></span><span title="10 silver badges"><span class="badge2"></span><span class="badgecount">10</span></span><span title="28 bronze badges"><span class="badge3"></span><span class="badgecount">28</span></span>
        </div>
    </div>

    </td>
    </tr>
    </tbody></table>
</td>        </tr>


<tr>
<td class="votecell"></td>
<td>
    <div id="comments-39903" class="comments dno">
        <table>
        <tbody>
        
            <tr><td></td><td></td></tr>
        
        </tbody>
    
        </table>
    </div>
    
    
    <div style="color: rgb(136, 136, 136);" class="was-this-helpful">
        feedback
    </div>
    
</td>
</tr>            </tbody></table>
</div>
    <a name="new-answer"></a>
    <form id="post-form" action="/questions/18436/answer/submit" method="post" class="post-form">
        <h2 class="space">Your Answer</h2>




<script type="text/javascript">
    StackExchange.ready(function() {
        initTagRenderer("".split(" "), "".split(" "));
         
        prepareEditor({
            heartbeatType: 'answer',
            bindNavPrevention: true,
            postfix: "",
            onDemand: true,
            discardSelector: ".discard-answer"
            ,immediatelyShowMarkdownHelp:true
        });
        

    });  
</script>


<div id="post-editor" class="post-editor">  

    
    <div class="wmd-container">
        <div id="wmd-button-bar" class="wmd-button-bar"><ul id="wmd-button-row" class="wmd-button-row"><li style="left: 0px;" class="wmd-button" id="wmd-bold-button"><span style="background-position: 0px -20px;"></span></li><li style="left: 25px;" class="wmd-button" id="wmd-italic-button"><span style="background-position: -20px -20px;"></span></li><li style="left: 50px;" class="wmd-spacer" id="wmd-spacer1"><span style="background-position: -40px -20px;"></span></li><li style="left: 75px;" class="wmd-button" id="wmd-link-button"><span style="background-position: -40px -20px;"></span></li><li style="left: 100px;" class="wmd-button" id="wmd-quote-button"><span style="background-position: -60px -20px;"></span></li><li style="left: 125px;" class="wmd-button" id="wmd-code-button"><span style="background-position: -80px -20px;"></span></li><li style="left: 150px;" class="wmd-button" id="wmd-image-button"><span style="background-position: -100px -20px;"></span></li><li style="left: 175px;" class="wmd-spacer" id="wmd-spacer2"><span style="background-position: -120px -20px;"></span></li><li style="left: 200px;" class="wmd-button" id="wmd-olist-button"><span style="background-position: -120px -20px;"></span></li><li style="left: 225px;" class="wmd-button" id="wmd-ulist-button"><span style="background-position: -140px -20px;"></span></li><li style="left: 250px;" class="wmd-button" id="wmd-heading-button"><span style="background-position: -160px -20px;"></span></li><li style="left: 275px;" class="wmd-button" id="wmd-hr-button"><span style="background-position: -180px -20px;"></span></li><li style="left: 300px;" class="wmd-spacer" id="wmd-spacer3"><span style="background-position: -200px -20px;"></span></li><li style="left: 325px;" class="wmd-button" id="wmd-undo-button"><span style="background-position: -200px -20px;"></span></li><li style="left: 350px;" class="wmd-button" id="wmd-redo-button"><span style="background-position: -220px -20px;"></span></li></ul></div>
        <textarea id="wmd-input" class="wmd-input" name="post-text" cols="92" rows="15" tabindex="101"></textarea>
    </div>

    <div class="fl" style="margin-top: 8px; height:24px;">&nbsp;</div>
    <div id="draft-saved" class="draft-saved community-option fl" style="margin-top: 8px; height:24px; display:none;">draft saved</div>

    <div id="draft-discarded" class="draft-discarded community-option fl" style="margin-top: 8px; height:24px; display:none;">draft discarded</div>



    <div id="wmd-preview" class="wmd-preview"></div>
    <div></div>
    <div class="edit-block">
        <input id="fkey" name="fkey" value="4ede4d721424a7bee26362a9fcd5ed08" type="hidden">
        <input id="author" name="author" type="text">
    </div>
</div>            <div class="form-item">
        <table>
        <tbody><tr>
            <td class="vm open-id-login">
                <a id="login-link" style="font-size: 200%; margin-left: 30px;" href="http://gamedev.stackexchange.com/users/login?returnurl=%2fquestions%2f18436%2fmost-efficient-aabb-vs-ray-collision-algorithms">log in</a>
                <script type="text/javascript">
                    StackExchange.ready(function () {
                        StackExchange.helpers.onClickDraftSave('#login-link');
                    });
                </script>
            </td>
            <td class="orcell">
                <div class="orword">or</div>
                <div class="orline"></div>
            </td>
            <td class="vm">
                <div>
                    <label for="display-name">Name</label>
                    <input id="display-name" name="display-name" size="30" maxlength="30" tabindex="105" type="text">
                </div>
                <div>
                    <label for="m-address">Email</label>
                    <input id="m-address" name="m-address" size="40" maxlength="100" tabindex="106" type="text">
                    <span class="edit-field-overlay">required, but never shown</span>
                </div>
                <div>
                    <label for="home-page">Home Page</label>
                    <input id="home-page" name="home-page" size="40" maxlength="200" tabindex="107" type="text">
                </div>
            </td>
        </tr>
        </tbody></table>
    </div>
           
            <div class="form-submit cbt">
            <input id="submit-button" value="Post Your Answer" tabindex="110" type="submit">
            <a href="#" class="discard-answer dno">discard</a>
    <p class="privacy-policy-agreement">
        By posting your answer, you agree to the 
        <a href="http://stackexchange.com/legal/privacy-policy" target="_blank">privacy policy</a> and 
        <a href="http://stackexchange.com/legal/terms-of-service" target="_blank">terms of service</a>.
    </p>
        </div>
    </form>



        <h2 class="bottom-notice">
                Not the answer you're looking for? 
            Browse other questions tagged <a href="http://gamedev.stackexchange.com/questions/tagged/collision-detection" class="post-tag" title="show questions tagged 'collision-detection'" rel="tag">collision-detection</a> 
                or <a href="http://gamedev.stackexchange.com/questions/ask">ask your own question</a>.
        </h2>
</div>
</div>
<div id="sidebar">



     <script type="text/javascript">
        window.showNewUser = true;

            
                (function(){
                    var cs = window.sessionStorage && window.sessionStorage['tNewsletter'];
                    var m = /:\/\/([^\/]*)/.exec(document.referrer);
                    var h = {'www.reddit.com':1,'news.ycombinator.com':1};
                    if(window.sessionStorage && (cs || (m && m.length == 2 && h[m[1]]))){
                        showNewUser = false;
                        StackExchange.ready(function(){
                            StackExchange.newsletterAd.loader(m[1], cs);
                        });
                    }
                    if (window.localStorage && showNewUser){
                        var c = parseInt(localStorage['nuCounter'],10); 
                        c = isNaN(c) ? 1 : c+1;
                        window.localStorage['nuCounter'] = c; 
                        showNewUser = c < 10;
                    }
                })()
            
     </script>
    <div class="module newuser newuser-greeting" id="newuser-box" style="">
        <h4>Welcome!</h4>
        <div>
            <p>This is a collaboratively edited question and answer site for <b>professional and independent game developers</b>. It's 100% free, no registration required.</p><p>Got a question about the site itself? <a href="http://meta.gamedev.stackexchange.com/">meta</a> is the place to talk about things like what questions are appropriate, what tags we should use, etc.</p>
            <p class="ar"><a href="http://gamedev.stackexchange.com/about?mnu=1">about »</a>&nbsp;&nbsp;&nbsp;<a href="http://gamedev.stackexchange.com/faq?mnu=1">faq »</a>
&nbsp; <a href="http://meta.gamedev.stackexchange.com/">meta »</a>            </p>
        </div>
    </div>
     <script type="text/javascript">
        if (showNewUser) {
            document.getElementById('newuser-box').style.display = '';
        }
     </script>
        <div class="module question-stats">
        <p class="label-key">tagged</p>
        <div class="tagged"><a href="http://gamedev.stackexchange.com/questions/tagged/collision-detection" class="post-tag" title="show questions tagged 'collision-detection'" rel="tag">collision-detection</a>&nbsp;<span class="item-multiplier"><span class="item-multiplier-x">×</span>&nbsp;<span class="item-multiplier-count">610</span></span><br>
</div>
        <table id="qinfo">
            <tbody><tr>
                <td><p class="label-key">asked</p></td>
                <td style="padding-left:10px"><p class="label-key" title="2011-10-12 11:02:27Z"><b>1 year ago</b></p></td>
            </tr>
            <tr>
                <td><p class="label-key">viewed</p></td>

                <td style="padding-left:10px">
                    <p class="label-key">
                        <b>3864 times</b>
                    </p>
                </td>
            </tr>
            <tr>
                <td><p class="label-key">active</p></td>
                <td style="padding-left:10px"><p class="label-key"><b><a href="http://gamedev.stackexchange.com/questions/18436/most-efficient-aabb-vs-ray-collision-algorithms?lastactivity" class="lastactivity-link" title="2012-12-23 14:01:51Z">7 days ago</a></b></p></td>
            </tr>
        </tbody></table>
    </div>
        
    

<style type="text/css">
    .ads { margin-left: 60px; }
    .ad-container { width: 220px; height: 250px; margin-right: 20px; margin-bottom: 20px; }
    .ad-container .ad { height: 250px; }
    .ad-container .footer-container { overflow: hidden; height: 30px; position: relative; top: -30px; }
    .ad-container .footer-container .footer { font-family: Arial,Helvetic,Sans-Serif; font-size: 12px; text-align: center; padding-top: 9px; background-color: #000; color: #EFF; opacity: 0.9; filter: alpha(opacity=90); top: 30px; height: 30px; position: relative; }
    .ad-container a:hover { text-decoration: underline; }
    #adzerk2 { height: 250px; }
</style>
<script type="text/javascript">
    StackExchange.ready(function () {
        $(".ad-container").hover(
            function () {
                $(".ad-container .footer-container .footer").animate({ top: "0px" }, "fast") 
            },
            function () {
                $(".ad-container .footer-container .footer").animate({ top: "30px" }, "fast") 
            });
    });
</script>
    <div class="ad-container">    
        <div class="ad">    
        <a href="http://meta.gamedev.stackexchange.com/ads/ct/677?url=http%3a%2f%2ftwitter.com%2fstackgamedev" rel="nofollow" target="_blank"><img src="most-efficient-aabb-vs-ray-collision-algorithms_fichiers/2hrB8.png" alt="Tagline to show on mouseover" title="Tagline to show on mouseover" height="250" width="220"></a>
        </div>
        <div class="footer-container">
            <div class="footer">
                13 votes · <a href="http://meta.gamedev.stackexchange.com/questions/675#677" title="click to comment on this ad" target="_blank">comment</a> · <a href="http://meta.gamedev.stackexchange.com/ads/display/675" target="_blank">stats</a>
            </div>
        </div>
    </div>
    <div style="margin-bottom: 10px;">
        

<style type="text/css">
#newsletter-ad {
    width: 190px;
    height: 250px;
    overflow: hidden;
    background: url('http://cdn.sstatic.net/gamedev/img/newsletter-ad.png');
    padding: 0 15px 0 15px;
}
#newsletter-ad-header {
    margin-top: 60px;
}
#newsletter-ad ul {
    margin: 1em 0 1em 1.5em;
}
#newsletter-ad ul li {
    margin-bottom: 5px;
}
#newsletter-signup-container {
    text-align: center;
}
#newsletter-preview-container {
    margin-top: 10px;
    text-align: center;
}
#newsletter-email-input {
    width: 200px;
}
</style>

<script>
    StackExchange.ready(function () {
        StackExchange.newsletterAd.init();
    });
</script>

<div id="newsletter-ad">
    <p id="newsletter-ad-header">Get the <strong>weekly newsletter!</strong></p>
    <ul>
        <li>Top questions and answers</li>
        <li>Important announcements</li>
        <li>Unanswered questions</li>
    </ul>
    <div id="newsletter-signup-container"><input id="newsletter-signup" value="Sign up for the newsletter" type="button"></div>
    <p id="newsletter-preview-container">see an <a href="http://stackexchange.com/newsletters/newsletter?site=gamedev.stackexchange.com" id="newsletter-preview">example newsletter</a></p>
    <div class="dno">
            <p class="privacy-policy-agreement">
        By subscribing, you agree to the 
        <a href="http://stackexchange.com/legal/privacy-policy" target="_blank">privacy policy</a> and 
        <a href="http://stackexchange.com/legal/terms-of-service" target="_blank">terms of service</a>.
    </p>

    </div>
</div>

    </div>

<div class="module" id="chat-feature">
    

    
<h4><a title="22 users active in 16 rooms the last 60 minutes" href="http://chat.stackexchange.com/" id="h-chat-link">22 People Chatting</a></h4>

<div class="related" id="ad502-rooms"><div class="ad502-room"><h3 class="ad502-room-h3"><span class="ad502-room-title" title="Game Development"><a href="http://chat.stackexchange.com/rooms/19">Game Development</a></span></h3><span title="2012-12-31 08:03:31Z" class="ad502-last-message">3 hours ago - <a href="http://chat.stackexchange.com/users/15776">Gajoo</a></span><br><div class="ad502-users"><a href="http://chat.stackexchange.com/users/15776"><img src="most-efficient-aabb-vs-ray-collision-algorithms_fichiers/00663d741c8ff9488e50dc64c3aa1c7e.png" title="Gajoo: 3 hours ago"></a><a href="http://chat.stackexchange.com/users/43125"><img src="most-efficient-aabb-vs-ray-collision-algorithms_fichiers/6c156e371be7fff0e6e220bb0ff1e447.jpg" title="HJV: 3 hours ago"></a><a href="http://chat.stackexchange.com/users/1776"><img src="most-efficient-aabb-vs-ray-collision-algorithms_fichiers/f39b49328119158ca3e3e00df810d6dc.png" title="Kikaimaru: 14 hours ago"></a><a href="http://chat.stackexchange.com/users/48393"><img src="most-efficient-aabb-vs-ray-collision-algorithms_fichiers/a88ae65009215d88b7aef50d2d7f5326.png" title="snake5: 15 hours ago"></a><a href="http://chat.stackexchange.com/users/54672"><img src="most-efficient-aabb-vs-ray-collision-algorithms_fichiers/4c033488b80a25de7c6adf976b10ba25.jpg" title="Johan Larsson: 2 days ago"></a><a href="http://chat.stackexchange.com/users/3517"><img src="most-efficient-aabb-vs-ray-collision-algorithms_fichiers/05a80d2c7b26a787f4f1742644f76054.jpg" title="Zack The Human: Dec 21 at 19:45"></a></div></div></div>
<script type="text/javascript">
// <!--
    StackExchange.ready(
    function () {
        var options = {
            chatUrl: 'http://chat.stackexchange.com',
            reloadUrl: '/api/recent-chat',
            preloadData: {"activeUsers":22,"activeRooms":16,"rooms":[{"name":"Game Development","id":19,"lastPost":1356941011,"posts":170616,"users":[{"name":"Gajoo","id":15776,"emailhash":"00663d741c8ff9488e50dc64c3aa1c7e","lastPost":1356941011},{"name":"HJV","id":43125,"emailhash":"6c156e371be7fff0e6e220bb0ff1e447","lastPost":1356938324},{"name":"Kikaimaru","id":1776,"emailhash":"f39b49328119158ca3e3e00df810d6dc","lastPost":1356901655},{"name":"snake5","id":48393,"emailhash":"a88ae65009215d88b7aef50d2d7f5326","lastPost":1356898524},{"name":"Johan Larsson","id":54672,"emailhash":"4c033488b80a25de7c6adf976b10ba25","lastPost":1356735840},{"name":"Zack The Human","id":3517,"emailhash":"05a80d2c7b26a787f4f1742644f76054","lastPost":1356115523}],"messages":[{"date":1356941011,"user":"Gajoo","userid":15776}],"singleImage":false,"tags":[]}]} 
        };

        StackExchange.chatAd.init(options);
    });
// -->
</script>

</div>
      
    
    <div class="module sidebar-related">
        <h4 id="h-related">Related</h4>
        <div class="related" data-tracker="rq=1">
            <div class="spacer">
<a href="http://gamedev.stackexchange.com/questions/5906/collision-resolution?rq=1" class="question-hyperlink">Collision Resolution</a>
</div>
<div class="spacer">
<a href="http://gamedev.stackexchange.com/questions/11991/different-collision-effects-on-different-objects?rq=1" class="question-hyperlink">Different collision effects on different objects</a>
</div>
<div class="spacer">
<a href="http://gamedev.stackexchange.com/questions/12106/line-rectangle-collision-detection-and-response?rq=1" class="question-hyperlink">Line-Rectangle Collision Detection and Response</a>
</div>
<div class="spacer">
<a href="http://gamedev.stackexchange.com/questions/12318/best-efficient-way-to-implement-a-3d-collision?rq=1" class="question-hyperlink">Best/Efficient way to implement a 3d Collision</a>
</div>
<div class="spacer">
<a href="http://gamedev.stackexchange.com/questions/20038/movement-and-collision-with-aabb?rq=1" class="question-hyperlink">Movement and Collision with AABB</a>
</div>
<div class="spacer">
<a href="http://gamedev.stackexchange.com/questions/20815/most-efficient-bounding-sphere-vs-ray-collision-algorithms?rq=1" class="question-hyperlink">most efficient Bounding Sphere vs Ray collision algorithms</a>
</div>
<div class="spacer">
<a href="http://gamedev.stackexchange.com/questions/21179/collision-detection-in-a-3d-heightmap-based-world?rq=1" class="question-hyperlink">Collision detection in a 3D heightmap-based world</a>
</div>
<div class="spacer">
<a href="http://gamedev.stackexchange.com/questions/23195/collision-detection-between-a-bunch-of-aabb?rq=1" class="question-hyperlink">Collision detection between a bunch of AABB</a>
</div>
<div class="spacer">
<a href="http://gamedev.stackexchange.com/questions/23399/designing-efficient-2d-collision-for-topdown-shooter?rq=1" class="question-hyperlink">Designing Efficient 2D Collision for Topdown Shooter</a>
</div>
<div class="spacer">
<a href="http://gamedev.stackexchange.com/questions/24132/aabb-to-triangle-collision-resolution-on-corner?rq=1" class="question-hyperlink">AABB to Triangle collision resolution on corner</a>
</div>
<div class="spacer">
<a href="http://gamedev.stackexchange.com/questions/25950/aabb-aabb-collision-response-sliding?rq=1" class="question-hyperlink">AABB - AABB Collision response (sliding)</a>
</div>
<div class="spacer">
<a href="http://gamedev.stackexchange.com/questions/26005/aabb-aabb-collision-which-face-do-i-hit?rq=1" class="question-hyperlink">AABB - AABB Collision, which face do I hit?</a>
</div>
<div class="spacer">
<a href="http://gamedev.stackexchange.com/questions/26589/aabb-aabb-collision-response?rq=1" class="question-hyperlink">AABB &gt; AABB collision response?</a>
</div>
<div class="spacer">
<a href="http://gamedev.stackexchange.com/questions/28585/what-has-the-most-efficient-intersection-test-against-an-aabb-tree-obb-cylind?rq=1" class="question-hyperlink">What has the most efficient intersection test against an AABB tree - OBB, Cylinder or Capsule?</a>
</div>
<div class="spacer">
<a href="http://gamedev.stackexchange.com/questions/28674/sphere-and-aabb-intersection?rq=1" class="question-hyperlink">Sphere and AABB intersection</a>
</div>
<div class="spacer">
<a href="http://gamedev.stackexchange.com/questions/29355/sliding-collision-response?rq=1" class="question-hyperlink">Sliding collision response</a>
</div>
<div class="spacer">
<a href="http://gamedev.stackexchange.com/questions/29479/swept-aabb-vs-line-segment-2d?rq=1" class="question-hyperlink">Swept AABB vs Line Segment 2D</a>
</div>
<div class="spacer">
<a href="http://gamedev.stackexchange.com/questions/29769/ray-collision-with-rectangle-and-floating-point-accuracy?rq=1" class="question-hyperlink">ray collision with rectangle and floating point accuracy</a>
</div>
<div class="spacer">
<a href="http://gamedev.stackexchange.com/questions/30072/collision-representation-in-game-overworlds?rq=1" class="question-hyperlink">Collision representation in game overworlds</a>
</div>
<div class="spacer">
<a href="http://gamedev.stackexchange.com/questions/32807/collision-resolve-sphere-aabb-and-aabb-aabb?rq=1" class="question-hyperlink">collision resolve sphere-aabb and aabb-aabb</a>
</div>
<div class="spacer">
<a href="http://gamedev.stackexchange.com/questions/32989/creating-id-matrix-map-for-collision?rq=1" class="question-hyperlink">Creating id matrix/map for collision</a>
</div>
<div class="spacer">
<a href="http://gamedev.stackexchange.com/questions/38294/trouble-with-aabb-collision-response-and-physics?rq=1" class="question-hyperlink">Trouble with AABB collision response and physics</a>
</div>
<div class="spacer">
<a href="http://gamedev.stackexchange.com/questions/38891/making-an-efficient-collision-detection-system?rq=1" class="question-hyperlink">Making an efficient collision detection system</a>
</div>
<div class="spacer">
<a href="http://gamedev.stackexchange.com/questions/40547/box2d-too-much-for-circle-circle-collision-detection?rq=1" class="question-hyperlink">Box2d too much for Circle/Circle collision detection?</a>
</div>
<div class="spacer">
<a href="http://gamedev.stackexchange.com/questions/44925/circle-rectangle-collision-in-2d-most-efficient-way?rq=1" class="question-hyperlink">circle - rectangle collision in 2D, most efficient way</a>
</div>

        </div>
    </div>
</div>

<div id="feed-link">
    <div id="feed-link-text"><a href="http://gamedev.stackexchange.com/feeds/question/18436" title="feed of this question and its answers"><span class="feed-icon"></span>question feed</a></div>
</div>
<script type="text/javascript">
StackExchange.ready(function(){$.get('/posts/18436/ivc/2199');});
</script>
<noscript>
    <div><img src="/posts/18436/ivc/2199" class="dno" alt="" width="0" height="0"></div>
</noscript><div style="display:none" id="prettify-lang">default</div></div>
        </div>
    </div>
    <div id="footer">
        <div class="footerwrap">
            <div id="footer-menu">
                <a href="http://gamedev.stackexchange.com/about">about</a> |
                <a href="http://gamedev.stackexchange.com/faq">faq</a> |
                <a href="http://blog.stackexchange.com/?blb=1">blog</a> |
                    <a href="http://chat.stackexchange.com/">chat</a> |
                <a href="http://data.stackexchange.com/">data</a> |
                <a href="http://stackexchange.com/legal">legal</a> |
                <a href="http://stackexchange.com/legal/privacy-policy">privacy policy</a> |
                <a href="http://stackexchange.com/about/hiring">jobs</a> |
                <a href="http://stackexchange.com/about/contact">advertising info</a> |

                <a onclick="StackExchange.switchMobile('on', '/questions/18436/most-efficient-aabb-vs-ray-collision-algorithms')">mobile</a> |

                <b><a href="http://gamedev.stackexchange.com/help">contact us</a></b>
                  | <b><a href="http://meta.gamedev.stackexchange.com/">feedback</a></b>
                <div id="footer-sites">
                    
                        <span style="color:#FE7A15;font-size:140%">■</span>&nbsp;<a href="http://stackoverflow.com/">stackoverflow.com</a>&nbsp; 
                        <span style="color:#FE7A15;font-size:140%">■</span>&nbsp;<a href="http://stackapps.com/">api/apps</a>&nbsp; 
                        <span style="color:#FE7A15;font-size:140%">■</span>&nbsp;<a href="http://careers.stackoverflow.com/">careers 2.0</a>&nbsp; 
                        <span style="color:#E8272C;font-size:140%">■</span>&nbsp;<a href="http://serverfault.com/">serverfault.com</a>&nbsp; 
                        <span style="color:#00AFEF;font-size:140%">■</span>&nbsp;<a href="http://superuser.com/">superuser.com</a>&nbsp; 
                        <span style="color:#969696;font-size:140%">■</span>&nbsp;<a href="http://meta.stackoverflow.com/">meta</a>&nbsp; 
                        <span style="color:#46937D;font-size:140%">■</span>&nbsp;<a href="http://area51.stackexchange.com/">area&nbsp;51</a>&nbsp; 
                        <span style="color:#C0D0DC;font-size:140%">■</span>&nbsp;<a href="http://webapps.stackexchange.com/">webapps</a>&nbsp; 
                        <span style="color:#000000;font-size:140%">■</span>&nbsp;<a href="http://gaming.stackexchange.com/">gaming</a>&nbsp; 
                        <span style="color:#dd4814;font-size:140%">■</span>&nbsp;<a href="http://askubuntu.com/">ubuntu</a>&nbsp; 
                        <span style="color:#9ce4fe;font-size:140%">■</span>&nbsp;<a href="http://webmasters.stackexchange.com/">webmasters</a>&nbsp; 
                        <span style="color:#cf4d3f;font-size:140%">■</span>&nbsp;<a href="http://cooking.stackexchange.com/">cooking</a>&nbsp; 
                        <span style="color:#f4f28d;font-size:140%">■</span>&nbsp;<a href="http://gamedev.stackexchange.com/">game development</a>&nbsp; 
                        <span style="color:#0f3559;font-size:140%">■</span>&nbsp;<a href="http://math.stackexchange.com/">math</a>&nbsp; 
                        <span style="color:#f2f2f2;font-size:140%">■</span>&nbsp;<a href="http://photo.stackexchange.com/">photography</a>&nbsp; 
                        <span style="color:#037187;font-size:140%">■</span>&nbsp;<a href="http://stats.stackexchange.com/">stats</a>&nbsp; 
                        <span style="color:#f1e7cc;font-size:140%">■</span>&nbsp;<a href="http://tex.stackexchange.com/">tex</a>&nbsp; 
                        <span style="color:#e1cdae;font-size:140%">■</span>&nbsp;<a href="http://english.stackexchange.com/">english</a>&nbsp; 
                        <span style="color:#a2d9f6;font-size:140%">■</span>&nbsp;<a href="http://cstheory.stackexchange.com/">theoretical cs</a>&nbsp; 
                        <span style="color:#1b3e6c;font-size:140%">■</span>&nbsp;<a href="http://programmers.stackexchange.com/">programmers</a>&nbsp; 
                        <span style="color:#293a5d;font-size:140%">■</span>&nbsp;<a href="http://unix.stackexchange.com/">unix</a>&nbsp;
                        <span style="color:#bec0cb;font-size:140%">■</span>&nbsp;<a href="http://apple.stackexchange.com/">apple</a>&nbsp;
                        <span style="color:#939185;font-size:140%">■</span>&nbsp;<a href="http://wordpress.stackexchange.com/">wordpress</a>&nbsp;
                        <span style="color:#ebf5f5;font-size:140%">■</span>&nbsp;<a href="http://physics.stackexchange.com/">physics</a>&nbsp;
                        <span style="color:#4176ab;font-size:140%">■</span>&nbsp;<a href="http://diy.stackexchange.com/">home&nbsp;improvement</a>&nbsp;
                        <span style="color:#d1d8d7;font-size:140%">■</span>&nbsp;<a href="http://gis.stackexchange.com/">gis</a>&nbsp;
                        <span style="color:#e5e2d3;font-size:140%">■</span>&nbsp;<a href="http://electronics.stackexchange.com/">electrical&nbsp;engineering</a>&nbsp;
                        <span style="color:#a4c639;font-size:140%">■</span>&nbsp;<a href="http://android.stackexchange.com/">android</a>&nbsp;
                        <span style="color:#2e4e60;font-size:140%">■</span>&nbsp;<a href="http://security.stackexchange.com/">security</a>&nbsp;
                        <span style="color:#45bcb5;font-size:140%">■</span>&nbsp;<a href="http://bicycles.stackexchange.com/">bicycles</a>&nbsp;
                        <span style="color:#00adee;font-size:140%">■</span>&nbsp;<a href="http://dba.stackexchange.com/">dba</a>&nbsp;
                        <span style="color:#2edaf0;font-size:140%">■</span>&nbsp;<a href="http://drupal.stackexchange.com/">drupal</a>&nbsp;
                        <span style="color:#213951;font-size:140%">■</span>&nbsp;<a href="http://sharepoint.stackexchange.com/">sharepoint</a>&nbsp;
                        <span style="color:#73abb3;font-size:140%">■</span>&nbsp;<a href="http://scifi.stackexchange.com/">scifi &amp; fantasy</a>&nbsp;
                        <span style="color:#23629F;font-size:140%">■</span>&nbsp;<a href="http://ux.stackexchange.com/">user experience</a>&nbsp;
                        <span style="color:#faff72;font-size:140%">■</span>&nbsp;<a href="http://skeptics.stackexchange.com/">skeptics</a>&nbsp;
                        <span style="color:#623121;font-size:140%">■</span>&nbsp;<a href="http://rpg.stackexchange.com/">rpg</a>&nbsp;
                        <span style="color:#e4be88;font-size:140%">■</span>&nbsp;<a href="http://judaism.stackexchange.com/">judaism</a>&nbsp;
                        <span style="color:#ffecb1;font-size:140%">■</span>&nbsp;<a href="http://mathematica.stackexchange.com/">mathematica</a>&nbsp;
                </div>
            </div>
            <div id="footer-flair">
                <a class="peer1" href="http://www.peer1.com/stackoverflow"></a>  
	            <a href="http://creativecommons.org/licenses/by-sa/3.0/" class="cc-wiki-link"></a>
                <div id="svnrev">rev 2012.12.31.709</div>
                        </div>
            <div id="copyright">
                site design / logo © 2012 stack exchange inc; 
                user contributions licensed under <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license">cc-wiki</a> with <a href="http://blog.stackoverflow.com/2009/06/attribution-required/" rel="license">attribution required</a>
            </div>
            

        </div>
    <iframe id="global-auth-frame" style="display:none" src="most-efficient-aabb-vs-ray-collision-algorithms_fichiers/read.htm"></iframe></div>
    
    <noscript>
        <div id="noscript-warning">Game Development - Stack Exchange works best with JavaScript enabled<img src="http://pixel.quantserve.com/pixel/p-c1rF4kxgLUzNc.gif" alt="" class="dno"></div>
    </noscript>
    <script type="text/javascript">var _gaq=_gaq||[];_gaq.push(['_setAccount','UA-5620270-24']);
        _gaq.push(['_setDomainName','.stackexchange.com']);
        _gaq.push(['_setCustomVar', 1, 'tags', '|collision-detection|']); 
_gaq.push(['_trackPageview']);
    var _qevents = _qevents || [];
    (function(){
        var s=document.getElementsByTagName('script')[0];
        var ga=document.createElement('script');
        ga.type='text/javascript';
        ga.async=true;
        ga.src='http://www.google-analytics.com/ga.js';
        s.parentNode.insertBefore(ga,s);
        var sc=document.createElement('script');
        sc.type='text/javascript';
        sc.async=true;
        sc.src='http://edge.quantserve.com/quant.js'; 
        s.parentNode.insertBefore(sc,s);
    })();
    </script>
    <script type="text/javascript">
        _qevents.push({ qacct: "p-c1rF4kxgLUzNc" });
    </script>    
    

</body></html>